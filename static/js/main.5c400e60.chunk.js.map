{"version":3,"sources":["components/Container/Container.module.css","services/imageApi.js","components/Searchbar/Searchbar.js","components/ImageGallery/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","components/Container/Container.js","App.js","index.js"],"names":["module","exports","imageApi","fetchImage","inputValue","page","fetch","then","res","ok","json","Promise","reject","Error","Searchbar","state","value","handleValueChange","e","setState","currentTarget","toLowerCase","handleFormSubmit","preventDefault","trim","props","onSubmit","toast","error","this","className","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","webformatURL","data","onClick","src","alt","data-largeimageurl","ImageGallery","images","map","id","largeImageURL","Button","children","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackDropClick","target","window","addEventListener","removeEventListener","createPortal","Container","s","App","query","isLoading","showModal","showButton","activeImage","hits","length","success","console","log","scrollTo","top","documentElement","scrollHeight","behavior","catch","handleLoadMore","toggleModal","openModal","dataset","prevProps","prevState","prevQuery","largeimageurl","color","height","width","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.5c400e60.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__26Xeq\"};","const key = '18770359-69995c75016210012c9ceb955';\r\n\r\nconst fetchImage = (inputValue, page) => {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${inputValue}&page=${page}&key=${key}&image_type=photo&orientation=horizontal&per_page=12`,\r\n  ).then(res => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n\r\n    return Promise.reject(new Error(`Нет картинки с названием ${inputValue}`));\r\n  });\r\n};\r\n\r\nconst imageApi = {\r\n  fetchImage,\r\n};\r\n\r\nexport default imageApi;\r\n","import React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    value: '',\r\n  };\r\n\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n  };\r\n\r\n  handleValueChange = e => {\r\n    this.setState({ value: e.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleFormSubmit = e => {\r\n    e.preventDefault();\r\n    const { value } = this.state;\r\n\r\n    if (value.trim() === '') {\r\n      toast.error('Wow so easy !');\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(value);\r\n    this.setState({ value: '' });\r\n  };\r\n\r\n  render() {\r\n    const { value } = this.state;\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleFormSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={value}\r\n            onChange={this.handleValueChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n","import PropTypes from 'prop-types';\r\n\r\nconst ImageGalleryItem = ({ webformatURL, data, onClick }) => {\r\n  return (\r\n    <li className=\"ImageGalleryItem\">\r\n      <img\r\n        src={webformatURL}\r\n        alt=\"\"\r\n        data-largeimageurl={data}\r\n        onClick={e => onClick(e)}\r\n        className=\"ImageGalleryItem-image\"\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  webformatURL: PropTypes.string.isRequired,\r\n  data: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import ImageGalleryItem from './ImageGalleryItem';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ImageGallery = ({ images, onClick }) => {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {images.map(({ id, webformatURL, largeImageURL }) => {\r\n        return (\r\n          <ImageGalleryItem\r\n            key={id}\r\n            webformatURL={webformatURL}\r\n            data={largeImageURL}\r\n            onClick={onClick}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.array.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGallery;\r\n","import PropTypes from 'prop-types';\r\n\r\nconst Button = ({ onClick, children }) => {\r\n  return (\r\n    <button type=\"button\" className=\"Button\" onClick={onClick}>\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleBackDropClick = e => {\r\n    if (e.target === e.currentTarget) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleBackDropClick}>\r\n        <div className=\"Modal\">{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import PropTypes from 'prop-types';\r\nimport s from './Container.module.css';\r\n\r\nconst Container = ({ children }) => (\r\n  <div className={s.Container}>{children}</div>\r\n);\r\n\r\nContainer.propTypes = {\r\n  children: PropTypes.node,\r\n};\r\n\r\nexport default Container;\r\n","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { toast } from 'react-toastify';\nimport imageApi from './services/imageApi';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Loader from 'react-loader-spinner';\nimport Modal from './components/Modal';\nimport Container from './components/Container';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nclass App extends Component {\n  state = {\n    query: '',\n    images: [],\n    page: 1,\n    isLoading: false,\n    showModal: false,\n    showButton: false,\n    activeImage: '',\n    error: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevState.query;\n\n    if (this.state.query !== prevQuery || prevState.page !== this.state.page) {\n      this.fetchImage();\n    }\n  }\n\n  fetchImage = () => {\n    imageApi\n      .fetchImage(this.state.query, this.state.page)\n      .then(res => {\n        const { hits } = res;\n\n        if (!hits.length) {\n          toast.error(`По запросу ${this.state.query} ничего нет!`);\n        }\n\n        if (!!hits.length) {\n          toast.success('Запрос выполнен успешно!');\n          this.setState(({ images }) => ({\n            images: [...images, ...hits],\n            isLoading: false,\n            showButton: true,\n          }));\n        }\n\n        if (hits.length < 12) {\n          this.setState({\n            showButton: false,\n          });\n          console.log(hits.length);\n        }\n\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      })\n      .catch(error => {\n        this.setState({ error });\n      });\n  };\n\n  handleFormSubmit = query => {\n    this.setState({\n      query,\n      images: [],\n      page: 1,\n      showButton: false,\n    });\n  };\n\n  handleLoadMore = () => {\n    this.setState(({ page }) => ({\n      isLoading: true,\n      page: (page += 1),\n    }));\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  openModal = ({ target }) => {\n    this.setState({\n      activeImage: target.dataset,\n    });\n    this.toggleModal();\n  };\n\n  render() {\n    const { showModal, images, activeImage, showButton } = this.state;\n    return (\n      <Container>\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={activeImage.largeimageurl} alt=\"\" />\n          </Modal>\n        )}\n\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        {images && <ImageGallery images={images} onClick={this.openModal} />}\n        {showButton && (\n          <Button onClick={this.handleLoadMore}>\n            {this.state.isLoading ? (\n              <Loader type=\"Puff\" color=\"#00BFFF\" height={10} width={10} />\n            ) : (\n              'Load more...'\n            )}\n          </Button>\n        )}\n        <ToastContainer />\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root'),\n);\n"],"sourceRoot":""}